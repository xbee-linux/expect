schema-version: 1.0

type: builder


const:
  srcDir: /usr/src
  exportDir: /opt/expect

dependency: tcl

provision:

  - shell: "{{ .templates }}/download.sh"

build:
  - shell:
      cmds:
        - ./configure --prefix=/usr --with-tcl=/usr/lib --enable-shared --mandir=/usr/share/man --with-tclinclude=/usr/include
        - make
#        - make test
        - make install DESTDIR={% exportDir %}
        - mkdir -p {% exportDir %}/usr/lib/x86_64-linux-gnu
        - cp expect {% exportDir %}/usr/bin
        - cp libexpect{% version %}.so {% exportDir %}/usr/lib/x86_64-linux-gnu
      directory: "{% srcDir %}/expect{% version %}"
  - export: "{% exportDir %}"

